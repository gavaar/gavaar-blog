@if (admin()) {
  @let controls = postForm.controls;

  <div class="gav-blog-post__config">
    <gav-input [formControl]="controls.id" [options]="{ label: 'id' }" />
    <gav-input [formControl]="controls.assetURI" [options]="{ label: 'Asset URI' }"  />
    <gav-input [formControl]="controls.category" [options]="{ label: 'Category' }"  />
    <gav-input [formControl]="controls.description" [options]="{ label: 'Description' }"  />
    <gav-input [formControl]="controls.title" [options]="{ label: 'Title' }"  />
  </div>

  <div class="gav-blog-post__textarea">
    <gav-input
      type="textarea"
      label="Edit content"
      [formControl]="controls.content"
    />
  </div>

  @if (postForm.valid && postForm.dirty) {
    <button class="gav-blog-post__save-post"
      (click)="savePost()">
      Save changes
    </button>
  }
}

@if (admin() ? postForm.value : blogPost(); as post) {
  <div class="gav-blog-post__content">
    <h1 class="gav-blog-post__title">{{ post.title }}</h1>
    <small class="gav-blog-post__subtitle" (click)="showCreated.set(!showCreated())">
      @let dateText = showCreated() ? 'Created' : 'Updated';
      @let dateSeconds = (showCreated() ? post.date : post.updated)?.seconds || 0;
      @let dateIcon = showCreated() ? Icon.Bolt : Icon.Upload;

      <gav-icon [icon]="dateIcon" />&nbsp;
      <strong><u>{{ dateText }}</u></strong>&nbsp;
      <i>{{ (dateSeconds || 0) * 1000 | date: 'MMMM d, y, HH:mm' }}</i>
    </small>
    <i class="gav-blog-post__viewed"><gav-icon [icon]="Icon.Eye"/>&nbsp;<small>{{ views() }}</small></i>
    <gav-rich-text [content]="post.content || ''" />
  </div>
}
